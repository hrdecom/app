<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HR Decom — Bijoux Pro</title>
  <link rel="stylesheet" href="app.css"/>
</head>
<body>

<div id="app">
  <header class="header">
    <div class="brand"><div class="logo">✧</div><h1>Copywriting Bijoux</h1></div>
    <button id="settingsBtn" class="icon-btn">⚙️ Configuration</button>
  </header>

  <!-- MODAL PARAMÈTRES (Responsive) -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Paramètres Avancés</h2>
        <button id="closeSettings" class="close-btn">×</button>
      </div>
      
      <div class="tabs">
        <button class="tab-link active" data-tab="tab-collections">Collections</button>
        <button class="tab-link" data-tab="tab-prompts">Prompts IA</button>
        <button class="tab-link" data-tab="tab-blacklist">Blacklist / CSV</button>
      </div>
      
      <div id="tab-collections" class="tab-content">
        <p class="hint">Définissez vos collections par défaut.</p>
        <div id="collectionsList"></div>
        <button id="addCollection" class="secondary">+ Ajouter</button>
      </div>

      <div id="tab-prompts" class="tab-content hidden">
        <div class="prompt-segment">
          <label>Prompt Global (Système)</label>
          <textarea id="promptSystem" rows="4"></textarea>
        </div>
        <div class="prompt-segment">
          <label>Règles Titres</label>
          <textarea id="promptTitles" rows="3"></textarea>
        </div>
        <div class="prompt-segment">
          <label>Règles Descriptions (180 chars limit)</label>
          <textarea id="promptDesc" rows="3"></textarea>
        </div>
      </div>

      <div id="tab-blacklist" class="tab-content hidden">
        <label>Importer des noms via CSV (Titres ou Noms)</label>
        <input type="file" id="csvImport" accept=".csv" class="file-input"/>
        <p id="csvStatus" class="hint">Sélectionnez un CSV pour ajouter des noms à la blacklist.</p>
        <hr>
        <label>Blacklist actuelle (automatique + manuelle)</label>
        <textarea id="configBlacklist" rows="8" placeholder="Unity, Hope, Destiny..."></textarea>
      </div>

      <div class="modal-footer">
        <button id="saveConfig" class="primary">Enregistrer tout</button>
      </div>
    </div>
  </div>

  <div id="loading" class="loading hidden">
    <div class="spinner"></div>
    <div><strong>Génération...</strong><div id="timer">00:00</div></div>
  </div>

  <!-- WORKSPACE -->
  <section class="workspace">
    <div class="left">
      <div class="card">
        <div id="drop" class="drop">
          <input id="imageInput" type="file" accept="image/*"/>
          <div id="preview" class="preview hidden">
            <button id="removeImage" class="modern-remove-btn" title="Supprimer">×</button>
            <img id="previewImg"/>
          </div>
          <p id="dropPlaceholder">Déposez l'image ici</p>
        </div>
      </div>
    </div>

    <div class="right">
      <div class="card">
        <label>Collection suggérée</label>
        <select id="collectionSelect"></select>
      </div>

      <div class="actions">
        <button id="generateBtn" class="primary">Générer Tout</button>
        <button id="regenTitleBtn" class="secondary" disabled>Régénérer Titre</button>
        <button id="regenDescBtn" class="secondary" disabled>Régénérer Desc</button>
      </div>

      <div class="card result-card">
        <div class="card-head"><h3>Titre</h3><button id="copyTitle">⌘C</button></div>
        <pre id="titleText" class="selectable-text"></pre>
      </div>

      <div class="card result-card">
        <div class="card-head"><h3>Description</h3><button id="copyDesc">⌘C</button></div>
        <pre id="descText" class="selectable-text"></pre>
      </div>
    </div>
  </section>

  <!-- HISTORIQUE -->
  <section class="card history-section">
    <div class="history-header">
      <h2>Historique des produits</h2>
      <div class="search-box">
        <input type="text" id="historySearch" placeholder="Rechercher..."/>
        <span id="historyTotal">Total: 0</span>
      </div>
    </div>
    <div id="historyList" class="history-list"></div>
    <div id="pagination" class="pagination"></div>
  </section>
</div>

<script src="app.js"></script>
</body>
</html>
