<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HR Decom — Bijoux Pro</title>
  <link rel="stylesheet" href="app.css"/>
</head>
<body>

<div id="app">
  <header class="header">
    <div class="brand"><div class="logo">✧</div><h1>Copywriting Bijoux</h1></div>
    <button id="settingsBtn" class="icon-btn">⚙️ Paramètres</button>
  </header>

  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header"><h2>Configuration</h2><button id="closeSettings" class="close-btn">×</button></div>
      <div class="tabs">
        <button class="tab-link active" data-tab="tab-collections">Collections</button>
        <button class="tab-link" data-tab="tab-prompts">Prompts IA</button>
        <button class="tab-link" data-tab="tab-headlines-config">Headlines</button>
        <button class="tab-link" data-tab="tab-ads-config">Ad Copys</button>
        <button class="tab-link" data-tab="tab-blacklist">Blacklist</button>
      </div>
      
      <div id="tab-collections" class="tab-content">
        <div id="collectionsList"></div>
        <button id="addCollection" class="secondary-btn">+ Ajouter collection</button>
      </div>
      <div id="tab-prompts" class="tab-content hidden">
        <div class="prompt-segment"><label>1. Rôle Système</label><textarea id="promptSystem" rows="4"></textarea></div>
        <div class="prompt-segment"><label>2. Règles pour les Titres</label><textarea id="promptTitles" rows="4"></textarea></div>
        <div class="prompt-segment"><label>3. Règles pour les Descriptions</label><textarea id="promptDesc" rows="4"></textarea></div>
      </div>
      <div id="tab-headlines-config" class="tab-content hidden">
        <label>Prompt Principal Headlines</label>
        <textarea id="promptHeadlines" rows="6" style="margin-bottom:15px;"></textarea>
        <label>Boutons de Styles</label>
        <div id="styleButtonsEditor"></div>
        <button id="addStyleBtn" class="secondary-btn">+ Ajouter un style</button>
      </div>
      <div id="tab-ads-config" class="tab-content hidden">
        <label>Prompt Principal Ad Copys</label>
        <textarea id="promptAdCopys" rows="6" style="margin-bottom:15px;"></textarea>
        <label>Boutons de Styles Ads</label>
        <div id="adStyleButtonsEditor"></div>
        <button id="addAdStyleBtn" class="secondary-btn">+ Ajouter un style ad</button>
      </div>
      <div id="tab-blacklist" class="tab-content hidden">
        <textarea id="configBlacklist" rows="12" placeholder="Unity, Hope..."></textarea>
      </div>
      <div class="modal-footer"><button id="saveConfig" class="primary-btn">Enregistrer tout</button></div>
    </div>
  </div>

  <div id="headlinesModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header"><h2>Headlines Vidéos</h2><button id="closeHeadlines" class="close-btn">×</button></div>
      <div class="tabs">
        <button class="tab-link active" data-tab="tab-gen-headlines">Générer</button>
        <button class="tab-link" data-tab="tab-saved-headlines">Enregistrées</button>
      </div>
      <div id="tab-gen-headlines" class="tab-content">
        <div class="style-selector" id="styleSelectorContainer"></div>
        <div id="headlinesResults" class="headlines-results"></div>
        <div class="headlines-actions-wrapper">
            <div class="headlines-actions hidden" id="similarActions">
                <button id="genSimilarBtn" class="secondary-btn" style="width:100%; color: var(--apple-blue);">✨ Générer versions similaires améliorées</button>
            </div>
            <div id="headlinesLocalPagination" class="pagination"></div>
        </div>
      </div>
      <div id="tab-saved-headlines" class="tab-content hidden">
        <div id="headlinesSavedList" class="headlines-results"></div>
      </div>
      <div class="chat-container"><div class="chat-bar"><input type="text" id="headlineStyleInput" placeholder="Précisez votre demande..."/><button id="sendHeadlineChat">↑</button></div></div>
      <div class="modal-footer"><button id="saveHeadlinesBtn" class="primary-btn">Enregistrer les sélections</button></div>
    </div>
  </div>

  <div id="adsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header"><h2>Ad Copys (Facebook Ads)</h2><button id="closeAds" class="close-btn">×</button></div>
      <div class="tabs">
        <button class="tab-link active" data-tab="tab-gen-ads">Générer</button>
        <button class="tab-link" data-tab="tab-saved-ads">Enregistrés</button>
      </div>
      <div id="tab-gen-ads" class="tab-content">
        <div class="style-selector" id="adStyleSelectorContainer"></div>
        <div id="adsResults" class="headlines-results"></div>
        <div class="headlines-actions-wrapper">
            <div class="headlines-actions hidden" id="similarAdsActions">
                <button id="genSimilarAdsBtn" class="secondary-btn" style="width:100%; color: var(--apple-blue);">✨ Générer versions similaires améliorées</button>
            </div>
            <div id="adsLocalPagination" class="pagination"></div>
        </div>
      </div>
      <div id="tab-saved-ads" class="tab-content hidden">
        <div id="adsSavedList" class="headlines-results"></div>
        <div id="adsDefaultInfoBlock" class="ads-info-block"></div>
      </div>
      <div class="chat-container"><div class="chat-bar"><input type="text" id="adStyleInput" placeholder="Style de pub..."/><button id="sendAdChat">↑</button></div></div>
      <div class="modal-footer"><button id="saveAdsBtn" class="primary-btn">Enregistrer les sélections</button></div>
    </div>
  </div>

  <div id="loading"
